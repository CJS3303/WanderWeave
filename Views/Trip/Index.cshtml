@{
Layout = "_Layout";
var trips = ViewBag.trips as List<Project1.Models.Trip> ?? new();
ViewBag.Title = "My Trips";
}

<section class="bg-white-50 py-12">
  <div class="container mx-auto px-6">

    <!-- toolbar: grid/list toggle, count + sort, add button -->
    <div class="flex flex-col md:flex-row items-center justify-between mb-8 space-y-4 md:space-y-0">
      <!-- 1) grid toggle + count + sort -->
      <div class="flex items-center space-x-3">
        <button class="p-2 bg-[#3AA7BC] text-white rounded-md hover:bg-[#2c7484] transition">
          <i class="bi bi-grid-fill"></i>
        </button>
        <span class="text-gray-600">
          Showing @trips.Count trips out of @ViewBag.TotalTrips destinations
        </span>
        <form method="get" class="ml-4">
          <select name="sortOrder"
                  class="border rounded px-2 py-1"
                  onchange="this.form.submit()">
            <option value="default"       selected="@( (string)ViewBag.SortOrder == "default" )">Default</option>
            <option value="recent"        selected="@( (string)ViewBag.SortOrder == "recent" )">Most Recent</option>
            <option value="alphabetical"  selected="@( (string)ViewBag.SortOrder == "alphabetical" )">Alphabetical</option>
          </select>
        </form>
      </div>

      <!-- 2) New Trip button -->
      <label for="add-trip-modal"
             class="px-4 py-2 bg-[#3AA7BC] text-white rounded-md cursor-pointer hover:bg-[#2c7484] transition">
        + New Trip
      </label>
    </div>

    <!-- ► Add Trip Modal -->
    <input type="checkbox" id="add-trip-modal" class="modal-toggle" />
    <div class="modal">
      <div class="modal-box max-w-sm relative">
        <label for="add-trip-modal" class="btn btn-sm btn-circle absolute right-2 top-2">✕</label>
        <h3 class="text-xl font-semibold mb-4">Create a New Trip</h3>
        <form asp-controller="Trip" asp-action="Add" method="post" class="space-y-4">
          <!-- name/description/country… same as before -->
          <!-- … -->
        </form>
      </div>
    </div>
    <!-- end modal -->

    <!-- grid of cards -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      @foreach(var trip in trips)
      {
      <div class="group relative overflow-hidden rounded-lg bg-white shadow hover:shadow-lg transition">
        <a asp-action="Trip" asp-route-id="@trip.Id">
          <img src="@Url.Content("~/images/default-trip.jpg")"
               alt="@trip.Name"
               class="object-cover w-full h-48"/>
          <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition"></div>
          <div class="absolute bottom-0 left-0 right-0 bg-white bg-opacity-90 py-3 px-4 flex justify-between items-center">
            <h3 class="text-lg font-semibold uppercase">
              @trip.Name<span class="text-[#3AA7BC]">.</span>
            </h3>
          </div>
        </a>

        <!-- More dropdown -->
        <div class="absolute top-2 right-2 dropdown dropdown-end">
          <button tabindex="0" class="btn btn-ghost btn-sm">More</button>
          <ul tabindex="0"
              class="dropdown-content menu p-2 shadow bg-white rounded-box w-32">
            <li>
              <a asp-controller="Trip"
                 asp-action="Trip"
                 asp-route-id="@trip.Id">
                Details
              </a>
            </li>
            <li>
              <form method="post" asp-action="Delete" asp-controller="Trip" class="m-0">
                <input type="hidden" name="id" value="@trip.Id" />
                <button type="submit" class="w-full text-left">Delete</button>
              </form>
            </li>
          </ul>
        </div>
      </div>
      }
    </div>

  </div>
</section>
